<!doctype html>
<html lang="fr">

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
    <title>MeeZen</title>

    <style>
        html,
        body {
            height: 100%;
        }

        body {
            margin: 0;
            background: #fff;
            overflow-y: auto;
        }

        /* ✅ image ne dépasse jamais 1080px, centrée */
        .screen {
            position: relative;
            width: min(1080px, 100vw);
            margin: 0 auto;
        }

        /* ✅ pas de déformation, ratio respecté */
        .screen__img {
            width: 100%;
            height: auto;
            display: block;
        }

        /* ✅ bouton superposé SUR l'image (et il scroll avec elle) */
        .cta-img {
            position: absolute;
            left: 0;
            right: 0;
            bottom: calc(clamp(16px, 3.5%, 60px) + env(safe-area-inset-bottom));
            z-index: 10;

            display: flex;
            justify-content: center;

            text-decoration: none;
            -webkit-tap-highlight-color: transparent;
        }

        /* ✅ bouton scale avec l'image (864/1080 = 80%) */
        .cta-img img {
            width: 80%;
            max-width: 864px;
            /* taille originale du bouton */
            height: auto;
            display: block;
            user-select: none;
            -webkit-user-drag: none;
        }

        .cta-img:active {
            transform: translateY(1px);
        }
    </style>
</head>

<script>
    !function (t, e) { var o, n, p, r; e.__SV || (window.posthog && window.posthog.__loaded) || (window.posthog = e, e._i = [], e.init = function (i, s, a) { function g(t, e) { var o = e.split("."); 2 == o.length && (t = t[o[0]], e = o[1]), t[e] = function () { t.push([e].concat(Array.prototype.slice.call(arguments, 0))) } } (p = t.createElement("script")).type = "text/javascript", p.crossOrigin = "anonymous", p.async = !0, p.src = s.api_host.replace(".i.posthog.com", "-assets.i.posthog.com") + "/static/array.js", (r = t.getElementsByTagName("script")[0]).parentNode.insertBefore(p, r); var u = e; for (void 0 !== a ? u = e[a] = [] : a = "posthog", u.people = u.people || [], u.toString = function (t) { var e = "posthog"; return "posthog" !== a && (e += "." + a), t || (e += " (stub)"), e }, u.people.toString = function () { return u.toString(1) + ".people (stub)" }, o = "init rs ls yi ns us ts ss capture Hi calculateEventProperties vs register register_once register_for_session unregister unregister_for_session gs getFeatureFlag getFeatureFlagPayload isFeatureEnabled reloadFeatureFlags updateFlags updateEarlyAccessFeatureEnrollment getEarlyAccessFeatures on onFeatureFlags onSurveysLoaded onSessionId getSurveys getActiveMatchingSurveys renderSurvey displaySurvey cancelPendingSurvey canRenderSurvey canRenderSurveyAsync identify setPersonProperties group resetGroups setPersonPropertiesForFlags resetPersonPropertiesForFlags setGroupPropertiesForFlags resetGroupPropertiesForFlags reset get_distinct_id getGroups get_session_id get_session_replay_url alias set_config startSessionRecording stopSessionRecording sessionRecordingStarted captureException startExceptionAutocapture stopExceptionAutocapture loadToolbar get_property getSessionProperty fs ds createPersonProfile ps Qr opt_in_capturing opt_out_capturing has_opted_in_capturing has_opted_out_capturing get_explicit_consent_status is_capturing clear_opt_in_out_capturing hs debug O cs getPageViewId captureTraceFeedback captureTraceMetric Kr".split(" "), n = 0; n < o.length; n++)g(u, o[n]); e._i.push([i, s, a]) }, e.__SV = 1) }(document, window.posthog || []);
    posthog.init('phc_ce35rcF0P8IsXBAwIiS70B3oPKNiDZaWcDhhP4Ht1pJ', {
        api_host: 'https://eu.i.posthog.com',
        defaults: '2025-11-30',
        person_profiles: 'always',

        /* ✅ pour n'envoyer QUE ton event */
        capture_pageview: false,
        capture_pageleave: false,
        autocapture: false,

        loaded: function (ph) {
            // Récupère tous les query params
            const sp = new URLSearchParams(window.location.search);
            const props = {};

            // Supporte les clés répétées (?a=1&a=2)
            for (const [k, v] of sp.entries()) {
                if (props[k] === undefined) props[k] = v;
                else if (Array.isArray(props[k])) props[k].push(v);
                else props[k] = [props[k], v];
            }

            // Optionnel: info utile
            props.page_url = window.location.href;
            props.referrer = document.referrer || "";

            // ✅ event standard PostHog
            ph.capture('$pageview', props);
        }
    })
</script>

<body>

    <!-- Screen 1 -->
    <main class="screen">
        <img class="screen__img" src="pg1.webp" alt="">

        <a class="cta-img" id="ctaLink-1" href="https://t.me/+Mt-7h1jgDTs5YmY0">
            <img src="btn.webp">
        </a>
    </main>

    <!-- Screen 2 -->
    <main class="screen">
        <img class="screen__img" src="pg2.webp" alt="">
    </main>

    <!-- Screen 3 -->
    <main class="screen">
        <img class="screen__img" src="pg3.webp" alt="">
    </main>

    <!-- Screen 4 -->
    <main class="screen">
        <img class="screen__img" src="pg4.webp" alt="">

        <a class="cta-img" id="ctaLink-2" href="https://t.me/+Mt-7h1jgDTs5YmY0">
            <img src="btn.webp">
        </a>
    </main>


    document.addEventListener("DOMContentLoaded", function () {
    document.querySelectorAll('.cta-img').forEach(function (el) {
    el.addEventListener('click', function (e) {
    const url = this.getAttribute('href');

    // Empêche la redirection immédiate
    e.preventDefault();

    if (window.posthog) {
    posthog.capture('telegram_clicked', {
    link_id: this.id || "unknown",
    href: url,
    page_url: window.location.href
    }, {
    // ✅ CETTE PARTIE EST CRUCIALE
    // On attend que PostHog confirme l'envoi avant de partir
    callback: function() {
    window.location.href = url;
    }
    });

    // Sécurité au cas où le callback met trop de temps (timeout 1s)
    setTimeout(function() {
    window.location.href = url;
    }, 1000);

    } else {
    // Si PostHog est bloqué par un AdBlocker
    window.location.href = url;
    }
    });
    });
    });

</body>

</html>